<!DOCTYPE html><html prefix="og: http://ogp.me/ns#"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title>postman接口用例批量执行(Newman) · Let's go for a walk around the world - zuo</title><meta name="description" content="postman接口用例批量执行(Newman) - John Doe"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.ico"><link rel="stylesheet" href="//at.alicdn.com/t/font_1472710214_6648843.css"><link rel="stylesheet" href="//raw.githack.com/xwartz/hexo-theme-nuna/next/source/style/main.css?v=1.0.3"></head><body class="pupa"><div class="loading-bar"></div><main><div class="post post"><article itemscope itemtype="http://schema.org/Article" class="hentry"><div itemprop="image" style="background-image: url(http://otlbf411d.bkt.clouddn.com/17-8-15/74413866.jpg)" class="entry-cover"></div><div class="container"><div class="entry-header"><h1 class="entry-title">postman接口用例批量执行(Newman)</h1><div class="entry-description"></div><div class="entry-meta"><time itemprop="datePublished" datetime="Thursday, August 24th 2017, 6:30:00 pm" class="updated">Aug 24, 2017</time><em class="post-count">715 words</em></div></div><div itemprop="articleBody" class="entry-content"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>上一篇<a href="http://lipeilipei.top/2017/08/22/postman%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/" target="_blank" rel="external">《postman简单使用》</a>文章讲了postman的基本用法以及自带的批量执行方式，这种方式简单有效，但是做自动化就有一定的局限了，这篇文章主要是newman的用法，将postman用例导出，用newman在Windows命令行来执行，并且生成测试报告。</p>
<h2 id="Newman的安装"><a href="#Newman的安装" class="headerlink" title="Newman的安装"></a>Newman的安装</h2><h5 id="1-安装Node-js"><a href="#1-安装Node-js" class="headerlink" title="1.安装Node.js"></a>1.安装Node.js</h5><p>官网地址：<a href="https://nodejs.org/en/download/" target="_blank" rel="external">https://nodejs.org/en/download/</a><br><img src="http://otlbf411d.bkt.clouddn.com/17-8-24/58941664.jpg" alt="Node.js"><br>在Node.js官网选择合适的版本，我这里选择的是Windows平台64位的，下载完成后安装，一路点击下一步就好。<br>安装完后在cmd里面运行<code>node -v</code>,出现以下版本号信息就是安装成功。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">C:\windows\system32&gt;node -v</div><div class="line">v6.11.1</div></pre></td></tr></table></figure></p>
<h5 id="2-安装Newman"><a href="#2-安装Newman" class="headerlink" title="2.安装Newman"></a>2.安装Newman</h5><p>Node.js已经自带了npm，因此直接在命令行直接输入以下命令，等待安装完成。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install -g newman</div></pre></td></tr></table></figure></p>
<p>安装完成后，在命令行输入<code>newman -v</code>,出现下面版本号信息就是已经安装成功。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">C:\windows\system32&gt;newman -v</div><div class="line">3.8.0</div></pre></td></tr></table></figure></p>
<h2 id="Newman命令"><a href="#Newman命令" class="headerlink" title="Newman命令"></a>Newman命令</h2><p>这里只写以下最常用的命令及参数，更多详情参考<a href="https://www.npmjs.com/package/newman" target="_blank" rel="external">Newman官方文档</a>。</p>
<h5 id="1-最简单的命令"><a href="#1-最简单的命令" class="headerlink" title="1.最简单的命令"></a>1.最简单的命令</h5><p>任何路径下打开cmd里面输入这个命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">newman run E:\api_collection\test.postman_collection.json -e E:\api_collection\测试环境.postman_environment.json</div></pre></td></tr></table></figure></p>
<p><code>E:\api_collection\test.postman_collection.json</code>就是<a href="http://lipeilipei.top/2017/08/22/postman%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/" target="_blank" rel="external">上一篇</a>文章最后面导出到本地的接口用例collection<br><br><code>E:\api_collection\测试环境.postman_environment.json</code>是<a href="http://lipeilipei.top/2017/08/22/postman%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/" target="_blank" rel="external">上一篇</a>文章最后面导出的环境配置信息<br><br>执行完毕后可以直接在cmd窗口看到如下测试结果，但是用例较多的时候就不方便看了，因此在本地生成测试报告会更好。<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">C:\windows\system32&gt;newman run E:\api_collection\test.postman_collection.json -e E:\api_collection\测试环境.postman_environment.json</div><div class="line">newman</div><div class="line"></div><div class="line">test</div><div class="line"></div><div class="line">→ test_linshi</div><div class="line">  POST 10.60.xx.xx:8888/api/test/user/userLogin  [500 Internal Server Error, 327B, 124ms]</div><div class="line">  √  Status code is 200</div><div class="line">  √  Body matches string</div><div class="line"></div><div class="line">┌─────────────────────────┬──────────┬──────────┐</div><div class="line">│                         │ executed │   failed │</div><div class="line">├─────────────────────────┼──────────┼──────────┤</div><div class="line">│              iterations │        1 │        0 │</div><div class="line">├─────────────────────────┼──────────┼──────────┤</div><div class="line">│                requests │        1 │        0 │</div><div class="line">├─────────────────────────┼──────────┼──────────┤</div><div class="line">│            test-scripts │        1 │        0 │</div><div class="line">├─────────────────────────┼──────────┼──────────┤</div><div class="line">│      prerequest-scripts │        0 │        0 │</div><div class="line">├─────────────────────────┼──────────┼──────────┤</div><div class="line">│              assertions │        2 │        0 │</div><div class="line">├─────────────────────────┴──────────┴──────────┤</div><div class="line">│ total run duration: 204ms                     │</div><div class="line">├───────────────────────────────────────────────┤</div><div class="line">│ total data received: 118B (approx)            │</div><div class="line">├───────────────────────────────────────────────┤</div><div class="line">│ average response time: 124ms                  │</div><div class="line">└───────────────────────────────────────────────┘</div></pre></td></tr></table></figure></p>
<h5 id="2-执行多次"><a href="#2-执行多次" class="headerlink" title="2.执行多次"></a>2.执行多次</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">newman run E:\api_collection\test.postman_collection.json -n 10</div></pre></td></tr></table></figure>
<p>在上一个命令的后面加上<code>-n 10</code>，也就是这条测试命令运行10次。</p>
<h5 id="3-生成测试报告"><a href="#3-生成测试报告" class="headerlink" title="3.生成测试报告"></a>3.生成测试报告</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">newman run E:\api_collection\test.postman_collection.json -e E:\api_collection\测试环境.postman_environment.json -r html,json,junit --reporter-json-export jsonOut.json --reporter-junit-export xmlOut.xml --reporter-html-export htmlOut.html</div></pre></td></tr></table></figure>
<p><code>-r html,json,junit</code> 指定我要生成html，json，xml这三种形式的测试报告<br><br><code>--reporter-json-export jsonOut.json</code>   生成json格式的测试报告，报告名前面没有添加路径的话就会生成在执行命令所在的当前目录<br><br><code>--reporter-junit-export xmlOut.xml</code>    生成xml格式的测试报告<br><br><code>--reporter-html-export htmlOut.html</code>   生成html格式的测试报告<br></p>
<h5 id="生成结果如下："><a href="#生成结果如下：" class="headerlink" title="生成结果如下："></a>生成结果如下：</h5><p><img src="http://otlbf411d.bkt.clouddn.com/17-8-24/18866706.jpg" alt="测试报告"></p>
<hr>
<h3 id="相关文章"><a href="#相关文章" class="headerlink" title="相关文章"></a>相关文章</h3><p><a href="http://lipeilipei.top/2017/08/07/postman/" target="_blank" rel="external">postman安装以及问题</a><br><a href="http://lipeilipei.top/2017/08/22/postman%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/" target="_blank" rel="external">postman简单使用</a><br><a href="http://lipeilipei.top/2017/08/25/windows%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E5%92%8Cpython%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6/" target="_blank" rel="external">定时任务与Python发送邮件</a></p>
<font color="white">xx</font>

<p><div class="paginator"><a href="/archives/" class="all">more</a></div><footer><div class="copyright container"><p>    .</p></div></footer></p>
</div><div class="entry-extra"><div class="entry-tags"><a href="/tags/接口测试/" class="tag">接口测试</a><a href="/tags/测试/" class="tag">测试</a><a href="/tags/工具使用/" class="tag">工具使用</a><a href="/tags/newman/" class="tag">newman</a><a href="/tags/postman/" class="tag">postman</a></div></div></div></article></div></main><footer><div class="copyright container"><p>© Copyright 2018 by <a href="http://yoursite.com">John Doe</a>.</p></div></footer><script async src="//cdn.bootcss.com/mathjax/2.7.0-beta.0/MathJax.js"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-69822347-1",'auto');
ga('set', 'appName',"Let's go for a walk around the world - zuo");
ga('send','pageview');</script><script>(function () { var sid =500303098;cid =500303108;var hm = document.createElement('script');
hm.src = 'http://pingjs.qq.com/h5/stats.js';
hm.setAttribute('name', 'MTAH5'); hm.setAttribute('sid', sid); hm.setAttribute('cid', cid);
var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);
}())</script><script>var _vds = _vds || [];
window._vds = _vds;
(function(){
  ;_vds.push(['setAccountId',"90b580e047dd0007"  ]);
  (function() {
      var vds = document.createElement('script');
      vds.type='text/javascript';
      vds.async = true;
      vds.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'dn-growing.qbox.me/vds.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(vds, s);
  })();
})();</script><script async src="//raw.githack.com/Easyfood/pageAccelerator/master/dist/page-accelerator.min.js"></script><script async src="/script/loading.js"></script><script async src="/script/photo.js"></script></body></html>